<ion-content class="racha-content">
  <!-- Header personalizado IGUAL que Civil -->
  <div class="custom-header-section">
    <div class="green-background">
      <!-- Imagen de extremo a extremo -->
      <div class="racha-container-full">
        <img src="assets/image/racha.png" alt="Derecho Civil" class="racha-image-responsive">
      </div>
    </div>
  </div>

  <!-- BotÃ³n de volver -->
  <ion-button fill="clear" class="back-button" (click)="goBack()">
    <ion-icon name="chevron-back"></ion-icon>
  </ion-button>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading-container">
    <ion-spinner name="circular"></ion-spinner>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="!isLoading" class="content-area">

    <!-- Tarjeta principal de racha -->
    <div class="streak-main-card">
      <div class="streak-mascot">
        <img src="assets/image/menu/hoja.png" alt="Racha">
      </div>
      
      <div class="streak-number">{{ currentStreak }}</div>
      <div class="streak-label">dÃ­as de racha</div>
      
      <div class="streak-message">
        <span *ngIf="currentStreak === 0">Â¡Comienza tu racha hoy!</span>
        <span *ngIf="currentStreak > 0 && currentStreak < 5">Â¡Vas muy bien! ðŸ’ª</span>
        <span *ngIf="currentStreak >= 5 && currentStreak < 10">Â¡IncreÃ­ble constancia!</span>
        <span *ngIf="currentStreak >= 10">Â¡Eres imparable! ðŸ”¥</span>
      </div>
    </div>

    <!-- EstadÃ­sticas -->
    <div class="stats-row">
      <div class="stat-card">
        <ion-icon name="trophy" class="stat-icon"></ion-icon>
        <div class="stat-number">{{ bestStreak }}</div>
        <div class="stat-label">Mejor racha</div>
      </div>
      
      <div class="stat-card">
        <ion-icon name="calendar" class="stat-icon"></ion-icon>
        <div class="stat-number">{{ totalDays }}</div>
        <div class="stat-label">DÃ­as totales</div>
      </div>
    </div>

    <!-- PrÃ³xima meta -->
    <div class="next-goal-card">
      <h3>PrÃ³xima meta: {{ nextGoal }} dÃ­as</h3>
      <div class="goal-progress-bar">
        <div class="goal-progress-fill" [style.width.%]="getProgressToNextGoal()"></div>
      </div>
      <p class="goal-text">{{ getDaysToNextGoal() }} dÃ­as mÃ¡s para completar tu meta</p>
    </div>

    <!-- Logros -->
    <div class="achievements-section">
      <h2 class="section-title">
        Logros ({{ getUnlockedCount() }}/{{ getTotalCount() }})
      </h2>
      
      <div class="achievements-grid">
        <div 
          *ngFor="let achievement of achievements" 
          class="achievement-card"
          [class.unlocked]="achievement.unlocked"
          [class.locked]="!achievement.unlocked">
          
          <div class="achievement-icon" [style.background-color]="achievement.color">
            <ion-icon [name]="achievement.icon"></ion-icon>
          </div>
          
          <div class="achievement-info">
            <h4 class="achievement-title">{{ achievement.title }}</h4>
            <p class="achievement-desc">{{ achievement.description }}</p>
            <span class="achievement-days" *ngIf="!achievement.unlocked">
              {{ achievement.daysRequired >= 1 ? achievement.daysRequired + ' dÃ­as' : 'PrÃ³ximamente' }}
            </span>
            <span class="achievement-unlocked" *ngIf="achievement.unlocked">
              âœ“ Desbloqueado
            </span>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Bottom Navigation -->
  <app-bottom-nav></app-bottom-nav>
</ion-content>